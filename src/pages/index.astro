---
import Layout from "../layouts/Layout.astro";
import Hero from "../components/Hero.astro";
import img from "../assets/img/accueil.webp?url";
import img_mobile from "../assets/img/accueil_mobile.webp?url";
import AfriqueNord from "../assets/img/AfriqueNord.webp?url";
import AmeriqueCentrale from "../assets/img/AmeriqueCentrale.webp?url";
import AmeriqueLatine from "../assets/img/AmeriqueLatine.webp?url";
import AsieEst from "../assets/img/AsieEst.webp?url";
import EuropeEst from "../assets/img/EuropeEst.webp?url";
// import Mathis from "../assets/img/mathis.webp?url";
// import Valentine from "../assets/img/valentine.webp?url";
// import Ethan from "../assets/img/ethan.webp?url";
import Orient from "../assets/img/Orient.webp?url";
import { allRecettesSorted } from "../../backend/backend.mjs";
import CarouselRecette from "../components/Carousel_recette.astro";
import Arrow from "../assets/icons/arrow.svg?url";
import Button from "../components/Button_vide.astro";

const rec = await allRecettesSorted();
---

<Layout>
    <Hero title="RETROUVEZ LA CUISINE DU MONDE CHEZ VOUS !" />
    <img
        class="hidden lg:block"
        src={img}
        alt="RETROUVEZ LA CUISINE DU MONDE CHEZ VOUS !"
    />
    <img
        class="w-full object-cover lg:hidden"
        src={img_mobile}
        alt="RETROUVEZ LA CUISINE DU MONDE CHEZ VOUS !"
    />
    <div class="relative flex flex-col mt-20 lg:mt-30 mb-20 space-y-20">
        <h1 class="mx-auto font-lilitaone text-2xl lg:text-4xl uppercase">
            Qu'est ce que savoury road ?
        </h1>
        <div class="flex justify-center">
            <p class="font-montserrat text-2lg lg:text-xl w-8/10 lg:w-6/10">
                Chez <span class="font-bold">Savoury Road</span>, nous savons à
                quel point il est difficile de retrouver les produits de son
                pays lorsqu'on vit à l'étranger. C'est pourquoi <span
                    class="font-bold">nous sélectionnons</span
                > pour vous des produits alimentaires <span class="font-bold"
                    >authentiques</span
                > venus <span class="font-bold"
                    >d'Afrique, d'Asie, d'Amérique Latine, d'Europe et d'Orient</span
                >. Que ce soit pour cuisiner un plat traditionnel ou simplement
                retrouver <span class="font-bold">un goût familier</span>, nous
                avons ce qu'il vous faut. Notre catalogue évolue constamment
                pour répondre aux besoins de notre communauté et vous offrir
                toujours plus de choix.
            </p>
        </div>
        <div class="hidden lg:block relative flex flex-col mt-10 space-y-20">
            <h2 class="text-center font-lilitaone text-4xl uppercase">
                Choisis ta destination
            </h2>
            <div class="grid grid-cols-3 mx-50 space-y-30">
                <div>
                    <img
                        src={AfriqueNord}
                        class="mx-auto h-65"
                        alt="Afrique du Nord"
                    />
                    <a
                        href="../produits"
                        class="font-lilitaone border-
                    border-yellow text-yellow uppercase text-lg hover:w-[250px] transition-all cursor-pointer mx-auto rounded-xl border-3 flex justify-center items-center h-[50px] w-[200px]"
                        >afrique du nord</a
                    >
                </div>
                <div>
                    <img
                        src={AmeriqueCentrale}
                        class="mx-auto h-65"
                        alt="Amerique Centrale"
                    />
                    <a
                        href="../produits"
                        class="font-lilitaone uppercase text-lg hover:w-[250px] transition-all border-orange text-orange cursor-pointer mx-auto rounded-xl border-3 flex justify-center items-center h-[50px] w-[200px]"
                    >
                        amerique centrale</a
                    >
                </div>
                <div>
                    <img
                        src={AmeriqueLatine}
                        class="mx-auto h-65"
                        alt="Amerique Latine"
                    />
                    <a
                        href="../produits"
                        class="font-lilitaone uppercase text-lg hover:w-[250px] transition-all cursor-pointer border-red text-red mx-auto rounded-xl border-3 flex justify-center items-center h-[50px] w-[200px]"
                        >amerique latine</a
                    >
                </div>
                <div>
                    <img
                        src={AsieEst}
                        class="mx-auto h-65"
                        alt="Asie de l'Est"
                    />
                    <a
                        href="../produits"
                        class="font-lilitaone uppercase text-lg hover:w-[250px] transition-all cursor-pointer border-pink text-pink mx-auto rounded-xl border-3 flex justify-center items-center h-[50px] w-[200px]"
                    >
                        asie du sud est</a
                    >
                </div>
                <div>
                    <img
                        src={EuropeEst}
                        class="mx-auto h-65"
                        alt="Europe de l'Est"
                    />
                    <a
                        href="../produits"
                        class="font-lilitaone uppercase text-lg hover:w-[250px] transition-all cursor-pointer mx-auto border-purple text-purple rounded-xl border-3 flex justify-center items-center h-[50px] w-[200px]"
                        >europe de l'est</a
                    >
                </div>
                <div>
                    <img src={Orient} class="mx-auto h-65" alt="Orient" />
                    <a
                        href="../produits"
                        class="font-lilitaone uppercase text-lg hover:w-[250px] transition-all cursor-pointer mx-auto rounded-xl border-green text-green border-3 flex justify-center items-center h-[50px] w-[200px]"
                        >moyen orient</a
                    >
                </div>
            </div>
        </div>
        <div class="relative flex flex-col mt-10 lg:mt-5 mb-20 space-y-20">
            <h2 class="mx-auto font-lilitaone text-2xl lg:text-4xl uppercase">
                QUELQUE RECETTES TRADITIONELLES
            </h2>
            <div class="flex justify-center">
                <p class="font-montserrat text-2lg lg:text-xl w-8/10 lg:w-6/10">
                    Découvrez des <span class="font-bold"
                        >recettes authentiques</span
                    >, soigneusement sélectionnées pour vous inspirer en
                    cuisine. Idéales pour <span class="font-bold"
                        >varier vos repas</span
                    >, elles vous invitent à <span class="font-bold"
                        >tester de nouvelles saveurs et techniques</span
                    >.
                </p>
            </div>
        </div>
        <div class="relative w-full">
            <a href="/recettes" id="carousel" class="flex overflow-x-auto gap-4 scroll-smooth no-scrollbar px-8">
                {rec.slice(0,5).map((rec) => <CarouselRecette {...rec} />)}
            </a>
            <div class="flex justify-center mb-10 gap-10 mt-7">
                <button
                    id="carousel-left"
                    class="z-10 bg-white cursor-pointer rounded-full shadow px-2 py-1"
                    aria-label="Précédent"
                >
                    <img src={Arrow} class="rotate-90 scale-30" alt="bouton précédent" />
                </button>
                <button
                    id="carousel-right"
                    class="z-10 bg-white cursor-pointer rounded-full shadow px-2 py-1"
                    aria-label="Suivant"
                >
                <img src={Arrow} class="-rotate-90 scale-30" alt="bouton précédent" />
                </button>
            </div>
            <Button
                text="Toutes les recettes"
                link="/recettes"
            />
        </div>
        <div class="relative flex flex-col mt-10 lg:mt-5 mb-20 space-y-20">
            <h2 class="mx-auto font-lilitaone text-2xl lg:text-4xl uppercase">
                Beosin d'aide ?
            </h2>
            <div class="flex space-y-5 flex-col justify-center">
                <p class="font-montserrat mx-auto text-2lg lg:text-xl w-8/10 lg:w-6/10">
                    <span class="font-bold">SR Bot</span
                    > est à vos côtés pour vous guider tout au long de votre découverte des produits du monde. Vous pouvez lui <span class="font-bold">demander des détails</span> sur n'importe quel produit, <span class="font-bold">découvrir les récits fascinants</span> qui se cachent derrière chaque article ou <span class="font-bold">obtenir des recommandations sur mesure</span> en fonction de vos goûts personnels.
                </p>
                <p class="font-montserrat mx-auto text-2lg lg:text-xl w-8/10 lg:w-6/10">
                    Que vous <span class="font-bold">cherchiez un produit précis</span> ou que vous <span class="font-bold">vouliez simplement découvrir de nouvelles possibilités</span>, SR Bot est là pour vous accompagner et rendre chaque expérience d'achat plus enrichissante et intuitive.
                </p>
            </div>
            <Button
                text="Découvrir SR Bot"
                link="/chat"
            />
        </div>
        <div class="relative flex flex-col mt-10 lg:mt-5 mb-20 space-y-20">
            <h2 class="mx-auto font-lilitaone text-2xl lg:text-4xl uppercase">
                Nous rejoindre
            </h2>
            <div class="flex space-y-5 flex-col justify-center">
                <p class="font-montserrat mx-auto text-2lg lg:text-xl w-8/10 lg:w-6/10">
                    <span class="font-bold">En nous rejoignant</span
                    > , vous pourrez <span class="font-bold">proposer vos propres recettes</span> et enrichir notre sélection avec <span class="font-bold">vos spécialités favorites</span>.
                </p>
            </div>
            <Button
                text="Se connecter"
                link="/login"
            />
        </div>
        <div class="relative flex flex-col mt-10 lg:mt-5 mb-20 space-y-20">
            <h2 class="mx-auto font-lilitaone text-2xl lg:text-4xl uppercase">
                Des prix accessibles
            </h2>
            <div class="flex space-y-5 flex-col justify-center">
                <p class="font-montserrat mx-auto text-2lg lg:text-xl w-8/10 lg:w-6/10">
                    Nous redirigeons nos utilisateurs vers des sites commerçants <span class="font-bold">soigneusement sélectionnés</span>, garantissant des <span class="font-bold">prix bas</span> pour une expérience d'achat économique et accessible. En mettant l'accent sur <span class="font-bold">la qualité</span> et l'accessibilité, nous facilitons la découverte de saveurs exotiques <span class="font-bold">sans dépasser votre budget</span>.
                </p>
            </div>
        </div>
        <div class="relative flex flex-col mt-10 lg:mt-5 mb-20 space-y-20">
            <h2 class="mx-auto font-lilitaone text-2xl lg:text-4xl uppercase">
                Nos avantages
            </h2>
            <div class="flex space-y-5 flex-col justify-center">
                <p class="font-montserrat mx-auto text-2lg lg:text-xl w-8/10 lg:w-6/10">
                    <span class="font-bold">Nos avantages distinctifs :</span>,  Grâce à un bot alimenté par une Intelligence Artificielle, <span class="font-bold">nous accompagnons chaque utilisateur dans sa sélection de produits</span> en fonction de ses besoins spécifiques. Ce bot intuitif simplifie la recherche et propose des recommandations personnalisées. De plus, nous offrons <span class="font-bold">une page dédiée aux recettes traditionnelles des régions que nous couvrons</span>, permettant à nos visiteurs de découvrir et recréer les plats emblématiques de chaque culture.
                </p>
            </div>
        </div>
        <div class="relative flex flex-col mt-10 lg:mt-5 mb-20 space-y-20">
            <h2 class="mx-auto font-lilitaone text-2xl lg:text-4xl uppercase">
                Notre équipe
            </h2>
            <!-- <div class="flex flex-col lg:grid lg:grid-cols-3 font-montserrat space-y-20">
                <div class="space-y-5 flex flex-col items-center">
                    <img src={Valentine} alt="Valentine GUILLOT" class="w-40 h-40">
                    <div class="space-y-2 text-center">
                        <p class="">Valentine GUILLOT</p>
                        <p class="text-pink font-bold text-xl">Designeuse</p>
                        <p>valentine.guillot@edu.univ-fcomte.fr</p>
                    </div>
                </div>
                <div class="space-y-5 flex flex-col items-center">
                    <img src={Mathis} alt="Mathis GUELLATI" class="w-40 h-40">
                    <div class="space-y-2 text-center">
                        <p class="">Mathis GUELLATI</p>
                        <p class="text-pink font-bold text-xl">Développeur</p>
                        <p>mathis.guellati@edu.univ-fcomte.fr</p>
                    </div>
                </div>
                <div class="space-y-5 flex flex-col items-center">
                    <img src={Ethan} alt="Ethan HENNEQUIN-DE-MEYER" class="w-40 h-40">
                    <div class="space-y-2 text-center">
                        <p class="">Ethan HENNEQUIN-DE-MEYER</p>
                        <p class="text-pink font-bold text-xl">Communicant</p>
                        <p class="w-2/3 mx-auto">ethan.hennequin--de_meyer@edu.univ-fcomte.fr</p>
                    </div>
                </div>
            </div> -->
        </div>
    </div>

    <style>
        .no-scrollbar {
            scrollbar-width: none;
        }
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
    </style>

    <script>
        const toggle = document.querySelector("#menu-btn");
        const nav = document.querySelector("#menu");
        const page = document.body;
        const header = document.querySelector("#header");
        const carousel = document.getElementById("carousel");
        const btnLeft = document.getElementById("carousel-left");
        const btnRight = document.getElementById("carousel-right");
        function getScrollStep() {
            const card = carousel?.children[0];
            if (!card) return 200;
            const style = window.getComputedStyle(carousel);
            const gap = parseInt(style.gap) || 16;
            return card.offsetWidth + gap;
        }

        btnLeft?.addEventListener("click", () => {
            carousel.scrollBy({ left: -getScrollStep(), behavior: "smooth" });
        });
        btnRight?.addEventListener("click", () => {
            carousel.scrollBy({ left: getScrollStep(), behavior: "smooth" });
        });

        if (toggle && nav) {
            toggle.addEventListener("click", () => {
                const isOpen = toggle.ariaExpanded === "true";
                const isClosed = !isOpen;
                toggle.ariaExpanded = String(isClosed);
                nav.ariaHidden = String(isOpen);
                page.classList.toggle("noscroll", isClosed);
            });
        }

        let lastScrollY = window.scrollY;

        window.addEventListener("scroll", () => {
            if (window.scrollY > lastScrollY) {
                header.style.transform = "translateY(-100%)";
            } else {
                header.style.transform = "translateY(0)";
            }
            lastScrollY = window.scrollY;
        });

        const noscroll = document.createElement("style");
        noscroll.innerHTML = "body.noscroll { overflow: hidden; }";
        document.head.appendChild(noscroll);
    </script>
</Layout>
