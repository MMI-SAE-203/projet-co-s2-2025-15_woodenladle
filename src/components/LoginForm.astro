---

---

<form id="loginForm" class="bg-white p-6 rounded shadow w-80">
    <h2 class="text-xl mb-4 font-bold">Connexion</h2>
    <label class="block mb-2">
        Email
        <input type="email" name="email" required class="w-full p-2 border" />
    </label>
    <label class="block mb-4">
        Mot de passe
        <input
            type="password"
            name="password"
            required
            class="w-full p-2 border"
        />
    </label>
    <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded"
        >Se connecter</button
    >
    <p id="error" class="text-red-500 mt-2 hidden"></p>
</form>

<script is:browser>
    const form = document.getElementById("loginForm");
    const errorP = document.getElementById("error");

    form.addEventListener("submit", async (e) => {
        e.preventDefault();
        const data = new FormData(form);
        const email = data.get("email");
        const password = data.get("password");

        const res = await fetch("/api/login", {
            method: "POST",
            body: JSON.stringify({ email, password }),
            headers: { "Content-Type": "application/json" },
        });

        const json = await res.json();
        if (json.error) {
            errorP.textContent = json.error;
            errorP.classList.remove("hidden");
        } else {
            errorP.classList.add("hidden");
            alert("Connexion r√©ussie !");
            // Redirection possible ici
        }
    });
</script>
